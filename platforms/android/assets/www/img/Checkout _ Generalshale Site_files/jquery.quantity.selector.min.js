/* !
 * core.quantity.selector 0.0.4
 * https://stash.ecx.io/scm/frontnpm/core.quantity.selector.git
 *
 * Mario Perokovic <mario.perokovic@ecx.io>
 * Released under the MIT license
 *
 * Date: 2018-11-07 12:11:33
 */
!function(r){"use strict";function n(e,n){var c=r(".js-qty-selector-input",e),a=r(".js-qty-selector-minus",e),i=r(".js-qty-selector-plus",e),o=e.data("qs-packaging-qty")||n.PACKAGING_QTY,s=e.data("qs-max"),l=e.data("qs-min");a.on("click",function(){var t=parseFloat(c.val());u(a,i,c,l,s,o,t-o,n,e),n.onMinus.call(e)}),i.on("click",function(){var t=parseFloat(c.val());u(a,i,c,l,s,o,t+o,n,e),n.onPlus.call(e)}),c.on("focusout",function(){var t=parseFloat(c.val());u(a,i,c,l,s,o,t,n,e),n.onFocusOut.call(e)}),c.on("keydown",function(t){(function(t,e){var n=r(this).parents(".js-qty-selector"),c=r(".js-qty-selector-minus",n),a=r(".js-qty-selector-plus",n);switch(t.which){case 38:a.trigger("click");break;case 40:c.trigger("click");break;case 13:e.onEnter.call(n);break;default:(t.shiftKey||t.altKey||(t.which<48||57<t.which)&&(t.which<96||105<t.which)&&8!==t.which&&46!==t.which&&9!==t.which&&37!==t.which&&39!==t.which&&190!==t.which)&&t.preventDefault()}}).apply(this,[t,n])})}function u(t,e,n,c,a,i,o,s,l){var r=1;t.removeAttr("disabled"),e.removeAttr("disabled"),o&&"number"==typeof o||(o=c),o%i==0&&(r=0);var u=(Math.floor(o/i)+r)*i;u<=c&&(t.attr("disabled","disabled"),u=c),a<=u&&(u=a,e.attr("disabled","disabled")),n.val(u),s.onChange.call(l,[u])}r.fn.ecxQtySelector=function(t){var e=r.extend({},r.fn.ecxQtySelector.defaults,t);return this.each(function(){n(r(this),e)})},r.fn.ecxQtySelector.defaults={PACKAGING_QTY:1,onPlus:function(){},onMinus:function(){},onEnter:function(){},onFocusOut:function(){},onChange:function(){}}}(jQuery);